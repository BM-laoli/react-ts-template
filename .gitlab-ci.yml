# @format

# æ‰§è¡Œå‰é…ç½®ç¯å¢ƒ ã€packageã€‘
# node_module install ã€installã€‘
# æ£€æŸ¥hsuky ï¼Œä»£ç æ ¼å¼åŒ– ï¼Œæ£€æŸ¥eslint  ã€lintã€‘
# docker ï¼ˆå®¹å™¨åŒ…ï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯nodeä¸‹çš„ä¸€ä¸ªngxç±»ä¼¼çš„ğŸ”§å®ƒå°±æ˜¯æˆ‘ä»¬ï¼‰ ã€dockerã€‘
# run docker ( èµ°ä¸€ä¸ª æ‰§è¡Œdocker æ–‡ä»¶ )ã€rundockerã€‘

# éœ€è¦ç»™å®šä¸€äº›å˜é‡æ§åˆ¶ci/cdçš„æ‰§è¡Œ
# è¿™é‡Œæ˜¯ä¸€ä¸ª æ¯”è¾ƒå¥½çš„ ç¤ºä¾‹ï¼ˆhttps://gitlab.com/python-devs/ci-images/-/blob/main/.gitlab-ci.ymlï¼‰

stages: # åˆ†æ®µ
  - build

cache: # ç¼“å­˜
    paths:
        - node_modules
        - build
        - gitlab_test_ci.tar

package-job:
    tags:
        - hot
    stage: package
    script:
        - npm config set registry https://registry.npm.taobao.org/

package-job:
  tags:
    - sss
  stage: build
  image: node:14-buster  #æ‹‰å–nodeé•œåƒ
  script:
  - npm install -g nrm
  - npm install 
  - npm run build
  artifacts:  #è¿™ä¸ªæ˜¯ä¸ºäº†èƒ½åœ¨ä¸‹ä¸ªä½œä¸šä¸­è·å–åˆ°è¿™ä¸ªdist
    paths:
    - build

